{"code":"(function(e){function t(t){for(var a,n,l=t[0],o=t[1],c=t[2],u=0,h=[];u<l.length;u++)n=l[u],r[n]&&h.push(r[n][0]),r[n]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);p&&p(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,l=1;l<i.length;l++){var o=i[l];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=n(n.s=i[0]))}return e}var a={},r={app:0},s=[];function n(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=a,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/\";var l=window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var p=o;s.push([0,\"chunk-vendors\"]),i()})({0:function(e,t,i){e.exports=i(\"56d7\")},\"0177\":function(e,t,i){},\"0c65\":function(e,t,i){},\"0cfb\":function(e,t,i){},\"1dad\":function(e,t,i){\"use strict\";var a=i(\"57d6\"),r=i.n(a);r.a},\"56d7\":function(e,t,i){\"use strict\";i.r(t);i(\"cadf\"),i(\"551c\"),i(\"f751\"),i(\"097d\");var a=i(\"2b0e\"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{class:this.$store.state.currentPhase,attrs:{id:\"app\"}},[i(\"SplashScreen\"),i(\"CharacterBar\"),i(\"div\",{attrs:{id:\"go-button\"},on:{click:function(t){return e.advanceGamePhase()}}},[e._v(\"Go!\")]),i(\"div\",{attrs:{id:\"settings\"},on:{click:function(t){return e.toggleSettings()}}},[e._v(\"⚙️\")]),i(\"div\",{attrs:{id:\"alerts\"}},[e._v(e._s(this.$store.state.alertMessage))]),i(\"div\",{class:[this.placeShipTypeClass,this.isMovesLeft?\"\":\"no-moves-left\"],attrs:{id:\"fieldMy\"}},[i(\"FieldGrid\",{attrs:{player:this.$store.state.currentPlayer}}),e._l(this.getShipsByPlayer(this.$store.state.currentPlayer),function(e){return i(\"div\",{staticClass:\"ship\",class:[e.classification,e.isDamaged?\"isDamaged\":\"\",e.isDead?\"isDead\":\"\"],style:e.style},[i(\"ShipControls\",{attrs:{ship:e}})],1)})],2),i(\"div\",{attrs:{id:\"fieldTheir\"}},[i(\"FieldGridOpponent\",{attrs:{player:this.$store.state.opponent}})],1),i(\"ShipSelection\")],1)},s=[],n=i(\"cebc\"),l=i(\"2f62\"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{attrs:{id:\"splash-screen\"}},[i(\"div\",{attrs:{id:\"ready-player-one\"}},[i(\"div\",{staticClass:\"splash-screen-title\"},[i(\"span\",[e._v(e._s(this.$store.state.playerOne.name))]),e._v(\", готовься к бою! Враг не дремлет...\")]),i(\"div\",{staticClass:\"ready-button\",on:{click:function(t){return e.advanceGamePhase()}}},[e._v(\"1к чертей!\")])]),i(\"div\",{attrs:{id:\"ready-player-two\"}},[i(\"div\",{staticClass:\"splash-screen-title\"},[i(\"span\",[e._v(e._s(this.$store.state.playerTwo.name))]),e._v(\", они оскорбили твою бороду!\"),i(\"br\"),e._v(\"Отмой позор кровью!\")]),i(\"div\",{staticClass:\"ready-button\",on:{click:function(t){e.setShipType(\"big\"),e.advanceGamePhase()}}},[e._v(\"Яррр!\")])]),i(\"div\",{attrs:{id:\"game-menu\"}},[i(\"div\",{staticClass:\"new-game-button\",on:{click:function(t){return e.advanceGamePhase()}}},[e._v(\"Готовь пушки!\")])]),i(\"div\",{class:{show:this.$store.state.showSettings},attrs:{id:\"settings-menu\"}},[i(\"div\",{staticClass:\"settings-close\",on:{click:this.toggleSettings}},[e._v(\"×\")]),i(\"div\",{staticClass:\"settings-title\"},[e._v(\"Настроечки\")]),i(\"div\",{staticClass:\"settings-item\"},[i(\"div\",{staticClass:\"settings-item-label\"},[e._v('Портрет капитана \"'+e._s(this.$store.state.playerOne.name)+'\" (URL)')]),i(\"input\",{staticClass:\"settings-item-input\",domProps:{value:this.$store.state.playerOne.imageUrl},on:{input:this.newImageOne}})]),i(\"div\",{staticClass:\"settings-item\"},[i(\"div\",{staticClass:\"settings-item-label\"},[e._v('Портрет капитана \"'+e._s(this.$store.state.playerTwo.name)+'\" (URL)')]),i(\"input\",{staticClass:\"settings-item-input\",domProps:{value:this.$store.state.playerTwo.imageUrl},on:{input:this.newImageTwo}})]),i(\"a\",{staticClass:\"settings-clear-localstorage\",on:{click:function(t){return e.clearLocalStorage()}}},[e._v(\"Сбросить имена и юзерпики\")])])])},c=[],p={name:\"SplashScreen\",props:{player:String},computed:Object(n[\"a\"])({},Object(l[\"c\"])([])),methods:Object(n[\"a\"])({},Object(l[\"b\"])([\"advanceGamePhase\"]),Object(l[\"d\"])([\"setShipType\",\"sendAlertMessage\",\"updateImageUrlOne\",\"updateImageUrlTwo\",\"removeAvatars\",\"toggleSettings\"]),{clearLocalStorage:function(){localStorage.removeItem(\"TenShipsPlayerOneName\"),localStorage.removeItem(\"TenShipsPlayerTwoName\"),localStorage.removeItem(\"TenShipsPlayerOneImage\"),localStorage.removeItem(\"TenShipsPlayerTwoImage\"),this.removeAvatars(),this.sendAlertMessage(\"Локальное хранилище очищено.\")},newImageOne:function(e){this.updateImageUrlOne(e)},newImageTwo:function(e){this.updateImageUrlTwo(e)}})},u=p,h=(i(\"5c02\"),i(\"2877\")),d=Object(h[\"a\"])(u,o,c,!1,null,null,null),f=d.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{attrs:{id:\"character-bar\"}},[i(\"div\",{class:this.$store.state.currentPlayer,style:this.getCurrentAvatar,attrs:{id:\"avatar\"},on:{click:this.toggleSettings}}),i(\"div\",{staticClass:\"name-and-shots\"},[i(\"input\",{staticClass:\"player-name\",domProps:{value:this.getCurrentPlayerName},on:{input:this.updatePlayerName}}),i(\"div\",{staticClass:\"player-stats\"},[i(\"div\",{staticClass:\"moves-left\"},[e._v(\"⛵x\"+e._s(this.getMovesLeft))]),i(\"div\",{staticClass:\"shots-left\"},[e._v(\"💣x\"+e._s(this.getShotsLeft))])])]),i(\"div\",{class:this.$store.state.currentPlayer,attrs:{id:\"adversary\"}})])},y=[],m={name:\"CharacterBar\",computed:Object(n[\"a\"])({},Object(l[\"c\"])([\"getCurrentPlayerName\",\"getCurrentAvatar\",\"getMovesLeft\",\"getShotsLeft\"])),methods:Object(n[\"a\"])({},Object(l[\"d\"])([\"setShipType\",\"updateCurrentPlayerName\",\"toggleSettings\"]),{updatePlayerName:function(e){this.updateCurrentPlayerName(e)}})},g=m,b=(i(\"9f54\"),Object(h[\"a\"])(g,v,y,!1,null,null,null)),S=b.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{attrs:{id:\"shipSelection\"}},[i(\"div\",{staticClass:\"ship-buttons\"},[i(\"div\",{staticClass:\"ship-button\",class:this.shipButtonClass(\"big\"),on:{click:function(t){return e.setShipType(\"big\")}}},[i(\"div\",{staticClass:\"ship-button-amount\"},[e._v(\"x\"+e._s(this.getShipsAvailableByType(\"big\")))])]),i(\"div\",{staticClass:\"ship-button\",class:this.shipButtonClass(\"medium\"),on:{click:function(t){return e.setShipType(\"medium\")}}},[i(\"div\",{staticClass:\"ship-button-amount\"},[e._v(\"x\"+e._s(this.getShipsAvailableByType(\"medium\")))])]),i(\"div\",{staticClass:\"ship-button\",class:this.shipButtonClass(\"small\"),on:{click:function(t){return e.setShipType(\"small\")}}},[i(\"div\",{staticClass:\"ship-button-amount\"},[e._v(\"x\"+e._s(this.getShipsAvailableByType(\"small\")))])]),i(\"div\",{staticClass:\"ship-button\",class:this.shipButtonClass(\"tiny\"),on:{click:function(t){return e.setShipType(\"tiny\")}}},[i(\"div\",{staticClass:\"ship-button-amount\"},[e._v(\"x\"+e._s(this.getShipsAvailableByType(\"tiny\")))])])]),i(\"div\",{staticClass:\"utility-buttons\"},[i(\"div\",{staticClass:\"utility-button rotate-button\",on:{click:function(t){return e.toggleOrientation()}}}),i(\"div\",{staticClass:\"utility-button reset-button\",on:{click:function(t){return e.resetPlacement()}}},[e._v(\"Сброс\")]),i(\"div\",{staticClass:\"utility-button done-button\",on:{click:function(t){return e.donePlacing()}}},[e._v(\"Готово! \")])])])},P=[],T={name:\"ShipSelection\",computed:Object(n[\"a\"])({},Object(l[\"c\"])([\"getShipsAvailableByType\",\"getShipsAvailableAll\"])),methods:Object(n[\"a\"])({},Object(l[\"b\"])([\"advanceGamePhase\"]),Object(l[\"d\"])([\"setShipType\",\"toggleOrientation\",\"resetField\",\"sendAlertMessage\",\"populateFieldByPlayer\"]),{shipButtonClass:function(e){return{active:this.$store.state.shipPlaceType==e,horizontal:\"height\"!=this.$store.state.shipPlaceOrientation,disabled:0==this.getShipsAvailableByType(e)}},resetPlacement:function(){this.populateFieldByPlayer(),this.resetField()},donePlacing:function(){0!==this.getShipsAvailableAll?this.sendAlertMessage(\"Капитан, в этой битве нам понадобятся все корабли! Спусти же их на воду.\"):this.advanceGamePhase()}})},O=T,C=(i(\"6474\"),Object(h[\"a\"])(O,w,P,!1,null,null,null)),A=C.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"field-grid\"},[this.$store.state.currentPlayer==this.player&&\"goPlayerOne\"!=this.$store.state.currentPhase&&\"goPlayerTwo\"!=this.$store.state.currentPhase?[e._l(this.getFieldByParams(this.player),function(t,a){return e._l(t,function(t,r){return i(\"div\",{class:{forbidden:t.forbid,isShip:t.ship,mine:t.mine},on:{click:function(i){t.forbid?e.printForbidden():e.placeShip(a,r)}}})})})]:e._e(),this.$store.state.currentPlayer!=this.player||\"goPlayerOne\"!=this.$store.state.currentPhase&&\"goPlayerTwo\"!=this.$store.state.currentPhase?e._e():[e._l(this.getFieldByParams(this.player),function(t,a){return e._l(t,function(e,t){return i(\"div\",{class:{isShip:e.ship,mine:e.mine}})})})]],2)},k=[],j=i(\"5d73\"),M=i.n(j),F={name:\"FieldGrid\",props:{player:String},computed:Object(n[\"a\"])({},Object(l[\"c\"])([\"getFieldByParams\",\"getShipsAvailableByType\",\"getShipsAvailableAll\",\"isTileForbidden\",\"isTileShip\",\"opponentFieldCheck\"])),methods:Object(n[\"a\"])({},Object(l[\"d\"])([\"sendAlertMessage\",\"placeShipHead\",\"placeShipTiles\",\"placeForbiddenTiles\",\"placeMine\",\"setShipType\",\"markShipDamaged\"]),{placeShip:function(e,t){var i=this.$store.state.shipPlaceType;if(this.getShipsAvailableAll<=0)this.sendAlertMessage(\"Все корабли запущены. Пора идти в атаку.\");else{if(this.getShipsAvailableByType(i)<=0)return this.sendAlertMessage(\"Таких кораблей больше нет. Пиратский бюджет, крюком его по япкам!\"),void this.switchShipButtons(i);var a=this.$store.state.shipPlaceOrientation,r=1;r=\"big\"==i?4:\"medium\"==i?3:\"small\"==i?2:1;var s=this.getShipTiles(e,t,a,r),n=this.checkPlaceability(e,t,a,r,s);if(n){this.placeShipHead({row:e,col:t,type:i,size:r,orientation:a,tiles:s}),this.placeShipTiles(s);var l=this.getTilesToForbid(e,t,a,r);this.placeForbiddenTiles(l),this.switchShipButtons(i)}}},switchShipButtons:function(e){0==this.getShipsAvailableByType(e)&&(\"big\"==e?this.setShipType(\"medium\"):\"medium\"==e?this.setShipType(\"small\"):\"small\"==e?this.setShipType(\"tiny\"):\"tiny\"==e&&0!==this.getShipsAvailableAll&&this.setShipType(\"big\"))},getShipTiles:function(e,t,i,a){for(var r=[{row:e,col:t}],s=1;s<a;s++)\"width\"==i?r.push({row:e,col:t+s}):r.push({row:e+s,col:t});return r},getTilesToForbid:function(e,t,i,a){var r=[];if(\"width\"==i){for(var s=a+2,n=0;n<s;n++)0<=e-1&&0<=t-1+n&&t-1+n<=9&&r.push({row:e-1,col:t-1+n}),e+1<=9&&0<=t-1+n&&t-1+n<=9&&r.push({row:e+1,col:t-1+n});0<=t-1&&r.push({row:e,col:t-1}),t+a<=9&&r.push({row:e,col:t+a})}else{for(var l=a+2,o=0;o<l;o++)0<=t-1&&0<=e-1+o&&e-1+o<=9&&r.push({col:t-1,row:e-1+o}),t+1<=9&&0<=e-1+o&&e-1+o<=9&&r.push({col:t+1,row:e-1+o});0<=e-1&&r.push({row:e-1,col:t}),e+a<=9&&r.push({row:e+a,col:t})}return r},checkPlaceability:function(e,t,i,a,r){var s={row:e,col:t};if(\"width\"==i?s.col=t-1+a:s.row=e-1+a,s.col>9||s.row>9)return this.sendAlertMessage(\"Корабль никак не может торчать за картой!\"),!1;var n=!0,l=!1,o=void 0;try{for(var c,p=M()(r);!(n=(c=p.next()).done);n=!0){var u=c.value;if(this.isTileForbidden(u.row,u.col)||this.isTileShip(u.row,u.col))return this.sendAlertMessage(\"Таранить будем чужие корабли, свои не надо.\"),!1}}catch(h){l=!0,o=h}finally{try{n||null==p.return||p.return()}finally{if(l)throw o}}return!0},printForbidden:function(){this.sendAlertMessage(\"Тут уже что-то есть!\")}})},B=F,D=(i(\"1dad\"),Object(h[\"a\"])(B,_,k,!1,null,null,null)),I=D.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"field-grid\"},[[e._l(this.getFieldByParams(this.player),function(t,a){return e._l(t,function(t,r){return i(\"div\",{class:{isShip:t.ship,mine:t.mine,dead:t.dead},on:{click:function(t){return e.fireCannon(a,r)}}})})})]],2)},z=[],x={name:\"FieldGridOpponent\",props:{player:String},computed:Object(n[\"a\"])({},Object(l[\"c\"])([\"isShotsLeft\",\"getFieldByParams\",\"opponentFieldCheck\",\"getDamagedShip\",\"isShipDead\",\"checkWinCondition\"])),methods:Object(n[\"a\"])({},Object(l[\"d\"])([\"sendAlertMessage\",\"placeMine\",\"markShipDamaged\",\"markShipDead\",\"placeDeadTiles\",\"reduceShotsAvailable\",\"setLastShot\"]),{fireCannon:function(e,t){var i=\"Мимо.\";if(!this.isShotsLeft)return i=\"Пиратский бюджет позволяет тратить лишь одну бомбу в ход, капитан.\",void this.sendAlertMessage(i);if(this.opponentFieldCheck(e,t,\"mine\")||this.opponentFieldCheck(e,t,\"dead\")?i=\"Сюда мы уже стреляли, капитан.\":(this.placeMine({row:e,col:t}),this.reduceShotsAvailable(),this.setLastShot({row:e+1,col:t+1})),this.opponentFieldCheck(e,t,\"ship\")){this.markShipDamaged({row:e,col:t}),i=\"Вражеский корабль поражен!\";var a=this.getDamagedShip(e,t);this.isShipDead(a)&&(this.markShipDead(a),this.placeDeadTiles(a),i=\"Вражеский корабль потоплен! Насилуйте сундуки и вскрывайте девок!\",this.checkWinCondition&&(i=\"Все враги повержены. Ты - самый крутой пират этих морей, капитан!\"))}this.sendAlertMessage(i)}})},N=x,L=Object(h[\"a\"])(N,$,z,!1,null,null,null),U=L.exports,G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"ship-controls\"},[i(\"div\",{staticClass:\"ship-controls-up\",class:{disabled:this.isControlDisabled(e.ship.row,e.ship.col,e.ship.size,\"up\")},on:{click:function(t){return e.moveShip(e.ship.row,e.ship.col,e.ship.size,\"up\")}}}),i(\"div\",{staticClass:\"ship-controls-right\",class:{disabled:this.isControlDisabled(e.ship.row,e.ship.col,e.ship.size,\"right\")},on:{click:function(t){return e.moveShip(e.ship.row,e.ship.col,e.ship.size,\"right\")}}}),i(\"div\",{staticClass:\"ship-controls-down\",class:{disabled:this.isControlDisabled(e.ship.row,e.ship.col,e.ship.size,\"down\")},on:{click:function(t){return e.moveShip(e.ship.row,e.ship.col,e.ship.size,\"down\")}}}),i(\"div\",{staticClass:\"ship-controls-left\",class:{disabled:this.isControlDisabled(e.ship.row,e.ship.col,e.ship.size,\"left\")},on:{click:function(t){return e.moveShip(e.ship.row,e.ship.col,e.ship.size,\"left\")}}})])},J=[],E={name:\"ShipControls\",props:{ship:Object},computed:Object(n[\"a\"])({},Object(l[\"c\"])([\"isControlDisabled\"])),methods:Object(n[\"a\"])({},Object(l[\"d\"])([\"moveShipTiles\",\"reduceMovesAvailable\"]),{moveShip:function(e,t,i,a){this.moveShipTiles({row:e,col:t,size:i,direction:a}),this.reduceMovesAvailable()}})},H=E,W=(i(\"b0fc\"),Object(h[\"a\"])(H,G,J,!1,null,null,null)),R=W.exports,Y={name:\"app\",components:{SplashScreen:f,CharacterBar:S,ShipSelection:A,FieldGrid:I,FieldGridOpponent:U,ShipControls:R},computed:Object(n[\"a\"])({},Object(l[\"c\"])([\"getShipsByPlayer\",\"isMovesLeft\"]),{placeShipTypeClass:function(){return\"place-\"+this.$store.state.shipPlaceType+\" orient-\"+this.$store.state.shipPlaceOrientation}}),methods:Object(n[\"a\"])({},Object(l[\"d\"])([\"populateFieldByPlayer\",\"toggleSettings\"]),Object(l[\"b\"])([\"advanceGamePhase\",\"loadLocalData\"])),created:function(){this.loadLocalData(),this.populateFieldByPlayer(\"playerOne\"),this.populateFieldByPlayer(\"playerTwo\")}},q=Y,K=(i(\"cf25\"),Object(h[\"a\"])(q,r,s,!1,null,null,null)),Q=K.exports,V=i(\"f499\"),X=i.n(V);i(\"f386\"),i(\"9c86\"),i(\"7f7f\");a[\"a\"].use(l[\"a\"]);var Z=new l[\"a\"].Store({state:{alertMessage:\"Hello, beautiful!\",turnCount:0,currentPhase:\"gameMenu\",currentPlayer:\"playerOne\",opponent:\"playerTwo\",shipPlaceType:\"big\",shipPlaceOrientation:\"height\",showSettings:!1,playerOne:{name:\"Лихая Русалка\",imageUrl:\"\",movesAvailable:1,shotsAvailable:1,lastShot:\"\",availableShips:{big:1,medium:2,small:3,tiny:4},field:[],ships:[]},playerTwo:{name:\"Волчья Голова\",imageUrl:\"\",movesAvailable:1,shotsAvailable:1,lastShot:\"\",availableShips:{big:1,medium:2,small:3,tiny:4},field:[],ships:[]}},getters:{getCurrentPlayerName:function(e){return e[e.currentPlayer].name},getCurrentAvatar:function(e){return e[e.currentPlayer].imageUrl?\"background-image: url(\"+e[e.currentPlayer].imageUrl+\");\":\"\"},isMovesLeft:function(e){return e[e.currentPlayer].movesAvailable>0},isShotsLeft:function(e){return e[e.currentPlayer].shotsAvailable>0},getMovesLeft:function(e){return e[e.currentPlayer].movesAvailable},getShotsLeft:function(e){return e[e.currentPlayer].shotsAvailable},getFieldByParams:function(e){return function(t){return e[t].field}},getShipsByPlayer:function(e){return function(t){return e[t].ships}},getShipsAvailableByType:function(e){return function(t){return e[e.currentPlayer].availableShips[t]}},getShipsAvailableAll:function(e){var t=e[e.currentPlayer].availableShips;return t[\"big\"]+t[\"medium\"]+t[\"small\"]+t[\"tiny\"]},isTileForbidden:function(e){return function(t,i){return e[e.currentPlayer].field[t][i].forbid}},isTileShip:function(e){return function(t,i){return e[e.currentPlayer].field[t][i].ship}},opponentFieldCheck:function(e){return function(t,i,a){return e[e.opponent].field[t][i][a]}},isControlDisabled:function(e){return function(t,i,a,r){var s=e[e.currentPlayer].field;if(\"up\"==r&&t-1>=0){if(s[t-1][i].mine)return!0;if(t-2>=0&&s[t-2][i].ship)return!0;if(t-2>=0&&i-1>=0&&s[t-2][i-1].ship)return!0;if(t-2>=0&&i+1<=9&&s[t-2][i+1].ship)return!0}else if(\"down\"==r&&t+a<=9){if(s[t+a][i].mine)return!0;if(t+a+1<=9&&s[t+a+1][i].ship)return!0;if(t+a+1<=9&&i-1>=0&&s[t+a+1][i-1].ship)return!0;if(t+a+1<=9&&i+1<=9&&s[t+a+1][i+1].ship)return!0}else{if(!(\"left\"==r&&i-1>=0))return\"right\"==r&&i+a<=9&&(!!s[t][i+a].mine||(!!(i+a+1<=9&&s[t][i+a+1].ship)||(!!(i+a+1<=9&&t-1>=0&&s[t-1][i+a+1].ship)||(!!(i+a+1<=9&&t+1<=9&&s[t+1][i+a+1].ship)||(!!s[t][i+a].mine||i+a+1<=9&&s[t][i+a+1].ship)))));if(s[t][i-1].mine)return!0;if(i-2>=0&&s[t][i-2].ship)return!0;if(i-2>=0&&t-1>=0&&s[t-1][i-2].ship)return!0;if(i-2>=0&&t+1<=9&&s[t+1][i-2].ship)return!0}}},getDamagedShip:function(e){return function(t,i){var a=e[e.opponent].ships,r={},s=!0,n=!1,l=void 0;try{for(var o,c=M()(a);!(s=(o=c.next()).done);s=!0){var p=o.value,u=!0,h=!1,d=void 0;try{for(var f,v=M()(p.tiles);!(u=(f=v.next()).done);u=!0){var y=f.value;t==y.row&&i==y.col&&(r={size:p.size,row:p.row,col:p.col,orientation:p.orientation})}}catch(m){h=!0,d=m}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}}}catch(m){n=!0,l=m}finally{try{s||null==c.return||c.return()}finally{if(n)throw l}}return r}},isShipDead:function(e){return function(t){var i=0,a=e[e.opponent].ships,r=!0,s=!1,n=void 0;try{for(var l,o=M()(a);!(r=(l=o.next()).done);r=!0){var c=l.value;if(t.row==c.tiles[0].row&&t.col==c.tiles[0].col)if(\"height\"==t.orientation)for(var p=0;p<t.size;p++)e[e.opponent].field[t.row+p][t.col].ship&&e[e.opponent].field[t.row+p][t.col].mine&&i++;else for(var u=0;u<t.size;u++)e[e.opponent].field[t.row][t.col+u].ship&&e[e.opponent].field[t.row][t.col+u].mine&&i++}}catch(h){s=!0,n=h}finally{try{r||null==o.return||o.return()}finally{if(s)throw n}}return i==t.size}},checkWinCondition:function(e){var t=0,i=!0,a=!1,r=void 0;try{for(var s,n=M()(e[e.opponent].ships);!(i=(s=n.next()).done);i=!0){var l=s.value;l.isDead&&t++}}catch(o){a=!0,r=o}finally{try{i||null==n.return||n.return()}finally{if(a)throw r}}return 10==t}},mutations:{sendAlertMessage:function(e,t){e.alertMessage=t},setCurrentPhase:function(e,t){e.currentPhase=t},updateCurrentPlayerName:function(e,t){e[e.currentPlayer].name=t.target.value,localStorage.setItem(\"TenShipsPlayerOneName\",X()(e.playerOne.name)),localStorage.setItem(\"TenShipsPlayerTwoName\",X()(e.playerTwo.name))},updateImageUrlOne:function(e,t){e.playerOne.imageUrl=t.target.value,localStorage.setItem(\"TenShipsPlayerOneImage\",X()(e.playerOne.imageUrl))},updateImageUrlTwo:function(e,t){e.playerTwo.imageUrl=t.target.value,localStorage.setItem(\"TenShipsPlayerTwoImage\",X()(e.playerTwo.imageUrl))},removeAvatars:function(e){e.playerOne.name=\"Лихая Русалка\",e.playerTwo.name=\"Волчья Голова\",e.playerOne.imageUrl=\"\",e.playerTwo.imageUrl=\"\"},populateFieldByPlayer:function(e,t){for(var i=t||e.currentPlayer,a=[],r=0;r<10;r++){for(var s=[],n=0;n<10;n++)s.push({forbid:!1,mine:!1,dead:!1});a.push(s)}e[i].field=a},toggleSettings:function(e){e.showSettings=!e.showSettings},setLastShot:function(e,t){var i=\"A\";switch(t.col){case 1:i=\"A\";break;case 2:i=\"B\";break;case 3:i=\"C\";break;case 4:i=\"D\";break;case 5:i=\"E\";break;case 6:i=\"F\";break;case 7:i=\"G\";break;case 8:i=\"H\";break;case 9:i=\"I\";break;case 10:i=\"J\";break}e[e.currentPlayer].lastShot=i+t.row},reduceMovesAvailable:function(e){e[e.currentPlayer].movesAvailable--},reduceShotsAvailable:function(e){e[e.currentPlayer].shotsAvailable--},setShipType:function(e,t){e.shipPlaceType=t},toggleOrientation:function(e){\"height\"==e.shipPlaceOrientation?e.shipPlaceOrientation=\"width\":e.shipPlaceOrientation=\"height\"},placeMine:function(e,t){e[e.opponent].field[t.row][t.col].mine=!0},markShipDamaged:function(e,t){var i=e[e.opponent].ships,a=!0,r=!1,s=void 0;try{for(var n,l=M()(i);!(a=(n=l.next()).done);a=!0){var o=n.value,c=!0,p=!1,u=void 0;try{for(var h,d=M()(o.tiles);!(c=(h=d.next()).done);c=!0){var f=h.value;if(t.row==f.row&&t.col==f.col)return void(o.isDamaged=!0)}}catch(v){p=!0,u=v}finally{try{c||null==d.return||d.return()}finally{if(p)throw u}}}}catch(v){r=!0,s=v}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}},markShipDead:function(e,t){var i=e[e.opponent].ships,a=!0,r=!1,s=void 0;try{for(var n,l=M()(i);!(a=(n=l.next()).done);a=!0){var o=n.value;if(t.row==o.tiles[0].row&&t.col==o.tiles[0].col)return void(o.isDead=!0)}}catch(c){r=!0,s=c}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}},placeDeadTiles:function(e,t){var i=[];if(\"width\"==t.orientation){for(var a=t.size+2,r=0;r<a;r++)0<=t.row-1&&0<=t.col-1+r&&t.col-1+r<=9&&i.push({row:t.row-1,col:t.col-1+r}),t.row+1<=9&&0<=t.col-1+r&&t.col-1+r<=9&&i.push({row:t.row+1,col:t.col-1+r});0<=t.col-1&&i.push({row:t.row,col:t.col-1}),t.col+t.size<=9&&i.push({row:t.row,col:t.col+t.size})}else{for(var s=t.size+2,n=0;n<s;n++)0<=t.col-1&&0<=t.row-1+n&&t.row-1+n<=9&&i.push({col:t.col-1,row:t.row-1+n}),t.col+1<=9&&0<=t.row-1+n&&t.row-1+n<=9&&i.push({col:t.col+1,row:t.row-1+n});0<=t.row-1&&i.push({row:t.row-1,col:t.col}),t.row+t.size<=9&&i.push({row:t.row+t.size,col:t.col})}for(var l=0,o=i;l<o.length;l++){var c=o[l];e[e.opponent].field[c.row][c.col].dead=!0}},placeShipHead:function(e,t){if(e[e.currentPlayer].availableShips[t.type]>=1){var i={classification:\"\",col:t.col,row:t.row,size:t.size,orientation:t.orientation,tiles:t.tiles,isDamaged:!1,isDead:!1,style:\"left: \"+10*t.col+\"%; top: \"+10*t.row+\"%; \"+t.orientation+\": \"+10*t.size+\"%;\"};i.classification=\"ship-\"+e.shipPlaceType+\" \"+t.orientation,e[e.currentPlayer].ships.push(i),e[e.currentPlayer].availableShips[t.type]--}},placeShipTiles:function(e,t){var i=!0,a=!1,r=void 0;try{for(var s,n=M()(t);!(i=(s=n.next()).done);i=!0){var l=s.value;e[e.currentPlayer].field[l.row][l.col].ship=!0}}catch(o){a=!0,r=o}finally{try{i||null==n.return||n.return()}finally{if(a)throw r}}},moveShipTiles:function(e,t){var i=e[e.currentPlayer].ships,a=!0,r=!1,s=void 0;try{for(var n,l=M()(i);!(a=(n=l.next()).done);a=!0){var o=n.value;if(t.row==o.row&&t.col==o.col)return\"up\"==t.direction?(e[e.currentPlayer].field[o.row-1][o.col].ship=!0,e[e.currentPlayer].field[o.row-1+o.size][o.col].ship=!1,o.row--,o.tiles.pop(),o.tiles.unshift({row:o.row,col:o.col})):\"down\"==t.direction?(e[e.currentPlayer].field[o.row+o.size][o.col].ship=!0,e[e.currentPlayer].field[o.row][o.col].ship=!1,o.tiles.shift(),o.tiles.push({row:o.row+o.size,col:o.col}),o.row++):\"left\"==t.direction?(e[e.currentPlayer].field[o.row][o.col-1].ship=!0,e[e.currentPlayer].field[o.row][o.col-1+o.size].ship=!1,o.col--,o.tiles.pop(),o.tiles.unshift({row:o.row,col:o.col})):\"right\"==t.direction&&(e[e.currentPlayer].field[o.row][o.col+o.size].ship=!0,e[e.currentPlayer].field[o.row][o.col].ship=!1,o.tiles.shift(),o.tiles.push({row:o.row,col:o.col+o.size}),o.col++),void(o.style=\"left: \"+10*o.col+\"%; top: \"+10*o.row+\"%; \"+o.orientation+\": \"+10*o.size+\"%;\")}}catch(c){r=!0,s=c}finally{try{a||null==l.return||l.return()}finally{if(r)throw s}}},placeForbiddenTiles:function(e,t){var i=!0,a=!1,r=void 0;try{for(var s,n=M()(t);!(i=(s=n.next()).done);i=!0){var l=s.value;e[e.currentPlayer].field[l.row][l.col].forbid=!0}}catch(o){a=!0,r=o}finally{try{i||null==n.return||n.return()}finally{if(a)throw r}}},resetField:function(e){e[e.currentPlayer].ships=[],e[e.currentPlayer].availableShips={big:1,medium:2,small:3,tiny:4}}},actions:{loadLocalData:function(e){JSON.parse(localStorage.getItem(\"TenShipsPlayerOneName\"))&&(e.state.playerOne.name=JSON.parse(localStorage.getItem(\"TenShipsPlayerOneName\"))),JSON.parse(localStorage.getItem(\"TenShipsPlayerOneImage\"))&&(e.state.playerOne.imageUrl=JSON.parse(localStorage.getItem(\"TenShipsPlayerOneImage\"))),JSON.parse(localStorage.getItem(\"TenShipsPlayerTwoName\"))&&(e.state.playerTwo.name=JSON.parse(localStorage.getItem(\"TenShipsPlayerTwoName\"))),JSON.parse(localStorage.getItem(\"TenShipsPlayerTwoImage\"))&&(e.state.playerTwo.imageUrl=JSON.parse(localStorage.getItem(\"TenShipsPlayerTwoImage\")))},advanceGamePhase:function(e){switch(e.state.currentPhase){case\"readyPlayerOne\":e.state.currentPlayer=\"playerOne\",e.state.opponent=\"playerTwo\",e.state.currentPhase=\"goPlayerOne\",e.state.turnCount++,e.state.alertMessage=\"Шел \"+e.state.turnCount+\"-й день сражений. \",e.state[e.state.opponent].lastShot&&(e.state.alertMessage+=e.state[e.state.opponent].name+\" шлет привет в сектор \"+e.state[e.state.opponent].lastShot+\".\"),e.state[e.state.currentPlayer].movesAvailable=1,e.state[e.state.currentPlayer].shotsAvailable=1;break;case\"readyPlayerTwo\":e.state.currentPlayer=\"playerTwo\",e.state.opponent=\"playerOne\",e.state.alertMessage=\"Yarr!\",0==e.getters.getShipsAvailableAll?(e.state.currentPhase=\"goPlayerTwo\",e.state[e.state.currentPlayer].movesAvailable=1,e.state[e.state.currentPlayer].shotsAvailable=1,e.state.alertMessage=\"Шел \"+e.state.turnCount+\"-й день сражений. \",e.state[e.state.opponent].lastShot&&(e.state.alertMessage+=e.state[e.state.opponent].name+\" шлет привет в сектор \"+e.state[e.state.opponent].lastShot+\".\")):e.state.currentPhase=\"placeShipsTwo\";break;case\"placeShipsOne\":case\"goPlayerOne\":e.state.currentPhase=\"readyPlayerTwo\";break;case\"placeShipsTwo\":case\"goPlayerTwo\":e.state.currentPhase=\"readyPlayerOne\";break;default:e.state.currentPhase=\"placeShipsOne\"}}}});a[\"a\"].config.productionTip=!1,new a[\"a\"]({store:Z,render:function(e){return e(Q)}}).$mount(\"#app\")},\"57d6\":function(e,t,i){},\"5c02\":function(e,t,i){\"use strict\";var a=i(\"0c65\"),r=i.n(a);r.a},6474:function(e,t,i){\"use strict\";var a=i(\"0177\"),r=i.n(a);r.a},\"9f54\":function(e,t,i){\"use strict\";var a=i(\"b342\"),r=i.n(a);r.a},aa2f:function(e,t,i){},b0fc:function(e,t,i){\"use strict\";var a=i(\"aa2f\"),r=i.n(a);r.a},b342:function(e,t,i){},cf25:function(e,t,i){\"use strict\";var a=i(\"0cfb\"),r=i.n(a);r.a}});","extractedComments":[]}